---
layout: default
---

<article>
  <header>
    {% include breadcrumbs.html %}
    <h1>{{ page.title }}</h1>
  </header>

  <div class="page-content">
    {{ content }}
  </div>

  {%- assign pager = pagination | default: paginator -%}
  {%- assign paginated_posts = pager.posts | default: site.posts -%}

  {%- if paginated_posts and paginated_posts.size > 0 -%}
    <section class="news-section">
      <ul class="news-list">
        {%- for post in paginated_posts -%}
          <li class="news-item">
            <h3>
              <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
            </h3>
            <p class="news-meta">
              <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%B %-d, %Y" }}</time>
              {%- assign source_text = post.source | default: post.source_url -%}
              {%- if source_text -%}
                â€¢ <span class="news-source">
                  {%- assign matching_org = nil -%}
                  {%- if post.source -%}
                    {%- assign matching_org = site.organizations | where: "title", post.source | first -%}
                  {%- endif -%}
                  {%- if matching_org -%}
                    <a href="{{ matching_org.url | relative_url }}">{{ post.source }}</a>
                  {%- elsif post.source_url -%}
                    <a href="{{ post.source_url }}" rel="noopener noreferrer">{{ source_text }}</a>
                  {%- else -%}
                    {{ source_text }}
                  {%- endif -%}
                </span>
              {%- endif -%}
            </p>
            {%- assign teaser = post.excerpt | strip_html | strip_newlines -%}
            {%- if teaser == "" or teaser == nil -%}
              {%- assign teaser = post.content | strip_html | strip_newlines -%}
            {%- endif -%}
            {%- if teaser -%}
              <p class="news-excerpt">{{ teaser | truncate: 260 }}</p>
            {%- endif -%}
          </li>
        {%- endfor -%}
      </ul>
    </section>

    {%- if pager -%}
      {%- assign total_pages = pager.total_pages | default: pager.page_count | default: 1 -%}
      {%- if total_pages > 1 -%}
        <nav class="news-pagination" aria-label="News pagination">
          {%- assign previous_path = pager.previous_page_path | default: pager.previous -%}
          {%- assign next_path = pager.next_page_path | default: pager.next -%}
          <div class="news-pagination-links">
            <div class="news-pagination-group news-pagination-left">
              {%- if previous_path -%}
                <a class="news-pagination-link" href="{{ previous_path | relative_url }}">&larr; Newer</a>
              {%- else -%}
                <span class="news-pagination-link is-disabled" aria-hidden="true">&larr; Newer</span>
              {%- endif -%}
            </div>

            <div class="news-pagination-group news-pagination-center">
              <span class="news-pagination-page-count">
                Page {{ pager.page | default: 1 }} of {{ total_pages }}
              </span>
            </div>

            <div class="news-pagination-group news-pagination-right">
              {%- if next_path -%}
                <a class="news-pagination-link" href="{{ next_path | relative_url }}">Older &rarr;</a>
              {%- else -%}
                <span class="news-pagination-link is-disabled" aria-hidden="true">Older &rarr;</span>
              {%- endif -%}
            </div>
          </div>
        </nav>
      {%- endif -%}
    {%- endif -%}
  {%- else -%}
    <p>No news posts yet.</p>
  {%- endif -%}
</article>
