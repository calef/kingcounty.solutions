---
layout: default
---

<article class="h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    {% include breadcrumbs.html current=page.title %}
    <h1 itemprop="name headline">{{ page.title | escape }}</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">
        {{ page.date | date: "%B %-d, %Y" }}
      </time>
      {%- assign source_text = page.source | default: page.source_url -%}
      {%- if source_text -%}
        {%- assign matching_org = nil -%}
        {%- if page.source -%}
          {%- assign matching_org = site.organizations | where: "title", page.source | first -%}
        {%- endif -%}
        • <span>
          {%- if matching_org -%}
            <a href="{{ matching_org.url | relative_url }}">{{ page.source }}</a>
          {%- elsif page.source_url -%}
            <a href="{{ page.source_url }}" rel="noopener noreferrer">{{ source_text }}</a>
          {%- else -%}
            {{ source_text }}
          {%- endif -%}
        </span>
      {%- endif -%}
      {%- if page.author -%}
        • <span class="p-author h-card" itemprop="author">{{ page.author }}</span>
      {%- endif -%}
    </p>
    {% if page.topics and page.topics.size > 0 %}
      <div class="topic-tags">
        {% assign sorted_topics = page.topics | sort %}
        {% for t in sorted_topics %}
          {% assign topic_doc = site.topics | where: "title", t | first %}
          {% if topic_doc %}
            <a class="topic-pill" href="{{ topic_doc.url | relative_url }}">{{ t }}</a>
          {% else %}
            <span class="topic-pill">{{ t }}</span>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    {{ content }}

    {% if page.images and page.images.size > 0 %}
      {% assign post_carousel_images = '' | split: '' %}
      {% for image_id in page.images %}
        {% assign normalized_id = image_id | append: '' | strip %}
        {% assign image_doc = site.images | where: "checksum", normalized_id | first %}
        {% assign image_url = "" %}
        {% if image_doc %}
          {% assign image_url = image_doc.image_url | default: image_doc.data.image_url %}
        {% endif %}
        {% if image_doc and image_url %}
          {% assign post_carousel_images = post_carousel_images | push: image_doc %}
        {% endif %}
      {% endfor %}
      {% assign post_carousel_count = post_carousel_images | size %}
      {% if post_carousel_count > 0 %}
        {% capture post_carousel_aria_label %}Images for {{ page.title | default: "this page" }}{% endcapture %}
        {% include carousel.html images=post_carousel_images aria_label=post_carousel_aria_label %}
      {% endif %}
    {% endif %}
  </div>

  {%- if page.source_url -%}
    <p>
      For more information, visit the
      <a href="{{ page.source_url }}" rel="noopener noreferrer">original source</a>.
    </p>
  {%- endif -%}

  {%- assign all_posts = site.posts -%}
  {%- assign total_posts = all_posts | size -%}
  {%- assign current_post_index = nil -%}
  {%- for post in all_posts -%}
    {%- if post.url == page.url -%}
      {%- assign current_post_index = forloop.index0 -%}
      {%- break -%}
    {%- endif -%}
  {%- endfor -%}
  {%- if total_posts > 1 and current_post_index != nil -%}
    {%- assign newer_index = current_post_index | minus: 1 -%}
    {%- assign older_index = current_post_index | plus: 1 -%}
    {%- assign newer_post = nil -%}
    {%- assign older_post = nil -%}
    {%- if newer_index >= 0 -%}
      {%- assign newer_post = all_posts[newer_index] -%}
    {%- endif -%}
    {%- if older_index < total_posts -%}
      {%- assign older_post = all_posts[older_index] -%}
    {%- endif -%}
    <nav class="news-pagination" aria-label="News pagination">
      <div class="news-pagination-links">
        <div class="news-pagination-group news-pagination-left">
          {%- if newer_post -%}
            <a class="news-pagination-link" href="{{ newer_post.url | relative_url }}">&larr; Newer</a>
          {%- else -%}
            <span class="news-pagination-link is-disabled" aria-hidden="true">&larr; Newer</span>
          {%- endif -%}
        </div>

        <div class="news-pagination-group news-pagination-center">
          <span class="news-pagination-page-count">
            Page {{ current_post_index | plus: 1 }} of {{ total_posts }}
          </span>
        </div>

        <div class="news-pagination-group news-pagination-right">
          {%- if older_post -%}
            <a class="news-pagination-link" href="{{ older_post.url | relative_url }}">Older &rarr;</a>
          {%- else -%}
            <span class="news-pagination-link is-disabled" aria-hidden="true">Older &rarr;</span>
          {%- endif -%}
        </div>
      </div>
    </nav>
  {%- endif -%}

  {%- if site.disqus.shortname and page.comments != false -%}
    {%- include disqus_comments.html -%}
  {%- endif -%}
</article>
