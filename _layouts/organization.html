---
layout: default
---

<article class="page">

  {% comment %}
  ▸ Breadcrumb trail: recursively walk up the organization hierarchy (no "Home")
  {% endcomment %}
  {% assign current_parent = page.parent_organization %}
  {% assign chain = "" %}

  {% for i in (0..10) %}
    {% if current_parent %}
      {% assign parent_doc = site.organizations | where: "title", current_parent | first %}
      {% if parent_doc %}
        {% assign breadcrumb_label = parent_doc.acronym | default: parent_doc.title %}
        {% capture chain %}
          <a href="{{ parent_doc.url | relative_url }}">{{ breadcrumb_label }}</a> › {{ chain }}
        {% endcapture %}
        {% assign current_parent = parent_doc.parent_organization %}
      {% else %}
        {% capture chain %}
          {{ current_parent }} › {{ chain }}
        {% endcapture %}
        {% assign current_parent = nil %}
      {% endif %}
    {% else %}
      {% break %}
    {% endif %}
  {% endfor %}

  {% assign breadcrumb_current = page.acronym | default: page.title %}
  <nav class="breadcrumbs">
    <a href="{{ '/organizations/' | relative_url }}">Organizations</a> ›
    {% if chain != "" %}
      {{ chain }}
    {% endif %}
    <span>{{ breadcrumb_current }}</span>
  </nav>

  <header class="page-header">
    <h1 class="page-title">
      {{ page.title }}
      {% if page.acronym %}
        <span class="org-acronym">{{ page.acronym }}</span>
      {% endif %}
    </h1>

    {% if page.topics and page.topics.size > 0 %}
      <div class="org-topics">
        {% for t in page.topics %}
          {% assign topic_doc = site.topics | where: "title", t | first %}
          {% if topic_doc %}
            <a class="topic-pill" href="{{ topic_doc.url | relative_url }}">{{ t }}</a>
          {% else %}
            <span class="topic-pill">{{ t }}</span>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}
  </header>

  {% assign org_news_posts = site.posts | where: "source", page.title %}
  {% if org_news_posts %}
    {% assign org_news_posts = org_news_posts | sort: 'date' | reverse %}
  {% endif %}

  {% assign has_contact_info = false %}
  {% if page.email or page.phone or page.address %}
    {% assign has_contact_info = true %}
  {% endif %}

  <div class="page-content{% unless has_contact_info %} page-content--compact{% endunless %}">

    {% if has_contact_info %}
      <table class="org-info">
        <tbody>
          {% if page.email %}
          <tr>
            <th>Email</th>
            <td><a href="mailto:{{ page.email }}">{{ page.email }}</a></td>
          </tr>
          {% endif %}

          {% if page.phone %}
            {% assign tel = page.phone | replace: ' ', '' | replace: '(', '' | replace: ')', '' | replace: '-', '' %}
            <tr>
              <th>Phone</th>
              <td><a href="tel:+1{{ tel }}">+1 {{ page.phone }}</a></td>
            </tr>
          {% endif %}

          {% if page.address %}
          <tr>
            <th>Address</th>
            <td>
              {{ page.address }}<br/>
              <a href="https://www.google.com/maps/search/?api=1&query={{ page.address | uri_escape }}" rel="noopener noreferrer">View on map</a>
            </td>
          </tr>
          {% endif %}
        </tbody>
      </table>
    {% endif %}

    {% if content %}
      <div class="org-body">
        {{ content }}
      </div>
    {% endif %}

    {% if org_news_posts and org_news_posts.size > 0 %}
      <section class="org-news">
        <h2>{{ page.title }} News</h2>
        <ul>
          {% for post in org_news_posts %}
            <li>
              <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
              <span class="org-news-date">{{ post.date | date: "%b %-d, %Y" }}</span>
              {% assign news_excerpt = post.excerpt | strip_html | strip_newlines %}
              {% if news_excerpt %}
                <p class="org-news-excerpt">{{ news_excerpt | truncate: 220 }}</p>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </section>
    {% endif %}

    {% if page.website %}
      <p class="org-website">
        For more information, see the
        <a href="{{ page.website }}" rel="noopener noreferrer">{{ page.title }} website</a>.
      </p>
    {% endif %}

    {% assign children = site.organizations | where: "parent_organization", page.title %}
    {% if children and children.size > 0 %}
      <hr/>
      <h2>Units within {{ page.title }}</h2>
      <ul class="org-children">
        {% for child in children %}
          <li>
            <a href="{{ child.url | relative_url }}">{{ child.title }}</a>
            {% if child.acronym %} ({{ child.acronym }}){% endif %}
          </li>
        {% endfor %}
      </ul>
    {% endif %}
  </div>
</article>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": {{ page.title | jsonify }},
  {% if page.acronym %}"alternateName": {{ page.acronym | jsonify }},{% endif %}
  {% if page.website %}"url": {{ page.website | jsonify }},{% endif %}
  {% if page.email %}"email": {{ page.email | jsonify }},{% endif %}
  {% if page.phone %}"telephone": {{ page.phone | jsonify }},{% endif %}
  {% if page.address %}
  "address": {
    "@type": "PostalAddress",
    "streetAddress": {{ page.address | jsonify }}
  },
  {% endif %}
  "department": [
    {% for child in children %}
      { "@type": "Organization", "name": {{ child.title | jsonify }} }{% if forloop.last == false %},{% endif %}
    {% endfor %}
  ]
}
</script>

<style>
/* Breadcrumb navigation */
.breadcrumbs {
  font-size: 0.9em;
  margin: 0.25rem 0 0.5rem;
  color: #666;
}
.breadcrumbs a {
  color: inherit;
  text-decoration: none;
}
.breadcrumbs a:hover {
  text-decoration: underline;
}

/* Acronym badge */
.org-acronym {
  font-size: 0.6em;
  font-weight: 600;
  margin-left: 0.35em;
  padding: 0.2em 0.45em;
  border: 1px solid #ddd;
  border-radius: 0.4em;
}

/* Topic pills */
.org-topics {
  margin-top: 0.3rem;
  margin-bottom: 1rem;
}
.topic-pill {
  display: inline-block;
  margin: 0.15rem 0.35rem 0.15rem 0;
  padding: 0.15rem 0.5rem;
  border: 1px solid #e0e0e0;
  border-radius: 999px;
  font-size: 0.9em;
  text-decoration: none;
  color: inherit;
}
.topic-pill:hover {
  border-color: #ccc;
  text-decoration: underline;
}


/* Info table */
.org-info {
  border-collapse: collapse;
  margin-bottom: 1.5rem;
}
.org-info th {
  text-align: left;
  padding: 0.25rem 0.75rem 0.25rem 0;
  color: #666;
  vertical-align: top;
  white-space: nowrap;
}
.org-info td {
  padding: 0.25rem 0;
}

/* Content area */
.org-body {
  margin-top: 1.5rem;
}
.page-content--compact .org-body {
  margin-top: 0.5rem;
}

/* Website link section */
.org-website {
  margin-top: 1.5rem;
  font-style: italic;
}

/* Child organization list */
.org-children {
  margin-top: 0.75rem;
  padding-left: 1.25rem;
}
.org-children li {
  margin-bottom: 0.25rem;
}

/* News section */
.org-news {
  margin-top: 1.5rem;
}
.org-news h2 {
  margin-bottom: 0.5rem;
}
.org-news ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
.org-news li {
  margin-bottom: 0.35rem;
}
.org-news a {
  font-weight: 600;
  text-decoration: none;
}
.org-news a:hover {
  text-decoration: underline;
}
.org-news-date {
  display: inline-block;
  margin-left: 0.5rem;
  color: #666;
  font-size: 0.9em;
}
.org-news-excerpt {
  margin: 0.1rem 0 0.5rem;
  color: #444;
  font-size: 0.95em;
}
</style>
